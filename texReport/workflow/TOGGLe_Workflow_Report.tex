\documentclass[a4paper]{article}

%% Language and font encodings
\usepackage[english]{babel}
\usepackage[utf8x]{inputenc}
\usepackage[T1]{fontenc}

%% Sets page size and margins
\usepackage[a4paper,top=3cm,bottom=2cm,left=3cm,right=3cm,marginparwidth=1.75cm]{geometry}

% header & footer
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\rhead{\LaTeX}
\lhead{TOGGLe workflow report}
\rfoot{Page \thepage}

%% Useful packages
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage[colorinlistoftodos]{todonotes}
\usepackage[colorlinks=true, allcolors=blue]{hyperref}

%\usepackage{verbatim}
\usepackage{listings}
\usepackage{color}

\lstset{ % General setup for the package
 basicstyle=\footnotesize, %basicstyle=\small\ttfamily,
language=Perl,
numbersep=5pt,
%numbers=left,
numberstyle=\tiny\color{gray}, % number style
breaklines=true,
 breakatwhitespace=false,
frame=single,
framexleftmargin=2mm,
xleftmargin=2mm,
prebreak = \raisebox{0ex}[0ex][0ex]{\ensuremath{\hookleftarrow}},
%backgroundcolor=\color{green!5},
%frameround=fttt,
escapeinside=??,
rulecolor=\color{teal},
keywords={% Give key words here                                         % keywords
    maketitle},
keywordstyle=\color[rgb]{0,0,1},                    % keywords
        commentstyle=\color[rgb]{0.133,0.545,0.133},    % comments
        stringstyle=\color[rgb]{0.627,0.126,0.941}  % strings
%columns=fullflexible
}%



\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%           LOAD TITLE PAGE
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\input{input/title.tex}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%           LOAD TABLE OF CONTENTS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\tableofcontents

\newpage




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%           WORKFLOW DESCRIPTION
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Workflow Description}

%%%%%%%   SUBSECTION : load png file generated by graphivz
\subsection{Workflow Schema}

\begin{figure}[ht]
\centering
\includegraphics[width=0.6\textwidth]{togglePipeline.png}
\caption{\label{fig:worflow}Workflow diagram}
\end{figure}

%%%%%%%   SUBSECTION : load commandLine file
\subsection{Line code}

\lstinputlisting[language=Perl]{input/commandLine.tex}


%%%%%%%   SUBSECTION : load commandLine file
\subsection{Software versions used by the workflow}

\lstinputlisting[language=Perl]{input/software.txt}


%%%%%%%   SUBSECTION : link to software config (appendix)
\subsection{Software configuration}
See the software configuration used by TOGGLe (\ref{appendix:config})  in Appendix.



 % \verbatiminput{input/configuration.txt}
 
 
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%           JOBS DESCRIPTION
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newpage
\section{Jobs execution}

\subsection{Parallel execution (step number < 1000)}

\input{input/sample_parallel_table.tex}

\subsection{Global execution (step number >= 1000)}
\input{input/sample_global_table.tex}



\subsection{How to cite TOGGLe?}

\cite{Monat2015}

\clearpage

%\bibliographystyle{nar}
\bibliography{TOGGLe_Workflow_Report}

\clearpage
\section{Appendix}\appendix

%\appendix
\section{ Software configuration file used}
\label{appendix:config}
\lstinputlisting[language=Perl]{input/configuration.txt}

\end{document}

